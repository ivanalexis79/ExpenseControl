<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, viewport-fit=cover">
 
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    
    <title>Mis Gastos</title>
    <link rel="manifest" href="/ExpenseControl/manifest.json">
    <link rel="icon" href="assets/gastos.png">

    <link rel="stylesheet" href="mdl/material.min.css">
    <script src="mdl/material.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">    
    
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="css/pwa.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Scripts en el orden correcto -->
    <script defer src="js/pwa.js"></script>
    <script defer src="js/db.js"></script>
    <script defer src="js/app.js"></script>
    <script defer src="js/categorias.js"></script>
    <script defer src="js/ModalAgregarGasto.js"></script>
    <script defer src="js/chart.js"></script>
    <script src="js/update_detector.js"></script>

</head>
<body>

<div class="mdl-layout mdl-js-layout">
  <header class="mdl-layout__header mdl-layout__header--transparent">

  </header>

  <main class="mdl-layout__content">
      <div class="page-content"><!-- Your content goes here -->


          
          
          <div class="container">

            <!-- SecciÃ³n del grÃ¡fico -->
            <section class="chart-section">
                <h2>Gastos por CategorÃ­a</h2>



                <div class="chart-container">
                    <canvas id="graficoGastos"></canvas>
                </div>
                <div class="chart-controls">
                    <button onclick="window.actualizarGrafico()" class="btn btn-secondary">
                        ğŸ“Š Actualizar GrÃ¡fico
                    </button>
                    <button onclick="window.mostrarGraficoMesActual()" class="btn btn-secondary">
                        ğŸ“… Solo Este Mes
                    </button>
                </div>
            </section>

            <!-- Formulario para agregar gastos -->
            <section class="form-section">
                <div class="section-header">
                    <h2>Agregar Nuevo Gasto</h2>
                    <button onclick="mostrarGestorCategorias()" class="btn btn-secondary">
                        ğŸ·ï¸ Gestionar CategorÃ­as
                    </button>
                </div>

            </section>

            <!-- Resumen de gastos -->
            <section class="summary-section">
                <h2>Resumen</h2>
                <div id="resumenGastos" class="summary-cards">
                    <div class="summary-card">
                        <h3>Total Gastos</h3>
                        <p id="totalGastos">$0.00</p>
                    </div>
                    <div class="summary-card">
                        <h3>Este Mes</h3>
                        <p id="gastosMes">$0.00</p>
                    </div>
                    <div class="summary-card">
                        <h3>Cantidad</h3>
                        <p id="cantidadGastos">0</p>
                    </div>
                </div>
            </section>

            <!-- Lista de gastos recientes -->
            <section class="list-section">
                <h2>Gastos Recientes</h2>
                <div class="list-controls">
                    <button onclick="cargarGastos()" class="btn btn-secondary">
                        ğŸ”„ Actualizar Lista
                    </button>
                    <button onclick="mostrarSoloMesActual()" class="btn btn-secondary">
                        ğŸ“… Solo Este Mes
                    </button>
                </div>
                <div id="listaGastos" class="gastos-list">
                    <!-- Los gastos se cargan dinÃ¡micamente aquÃ­ -->
                </div>
            </section>
         </div>

    <!-- Modal para editar gastos -->
    <div id="modalEditar" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="cerrarModal()">&times;</span>
            <h2>Editar Gasto</h2>
            <form id="formEditar" onsubmit="guardarEdicion(event)">
                <input type="hidden" id="editarId">
                
                <div class="form-group">
                    <label for="editarMonto">ğŸ’µ Monto:</label>
                    <input type="number" id="editarMonto" step="0.01" min="0" required>
                </div>

                <div class="form-group">
                    <label for="editarDescripcion">ğŸ“ DescripciÃ³n:</label>
                    <input type="text" id="editarDescripcion" required>
                </div>

                <div class="form-group">
                    <label for="editarCategoria">ğŸ·ï¸ CategorÃ­a:</label>
                    <select id="editarCategoria" required>
                        <!-- Las opciones se llenan dinÃ¡micamente -->
                    </select>
                </div>

                <div class="form-group">
                    <label for="editarFecha">ğŸ“… Fecha:</label>
                    <input type="date" id="editarFecha" required>
                </div>

                <div class="modal-buttons">
                    <button type="submit" class="btn btn-primary">ğŸ’¾ Guardar</button>
                    <button type="button" onclick="cerrarModal()" class="btn btn-secondary">âŒ Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Loading indicator -->
    <div id="loading" class="loading" style="display: none;">
        <div class="spinner"></div>
        <p>Cargando...</p>
    </div>

    <!-- Toast notifications -->
    <div id="toast" class="toast"></div>

</div>
      
  </main>
</div>

    <style>
 
    </style>
</head>

   
    
</body>
    <button id="HomeAgregarGasto" class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored">
  <i class="material-icons">add</i>
</button>
 
<footer class="mdl-mini-footer fixed-footer">


    
    <div class="mdl-mini-footer__left-section">
        <button class="mdl-button mdl-js-button mdl-button--icon">
            <i class="material-icons">home</i>
        </button>
        <button class="mdl-button mdl-js-button mdl-button--icon">
            <i class="material-icons">home</i>
        </button>
        <button class="mdl-button mdl-js-button mdl-button--icon" onclick="verificarActualizaciones()" >
            <i class="material-icons">settings</i>
        </button>
        <button class="mdl-button mdl-js-button mdl-button--icon">
            <i class="material-icons">help</i>
        </button>
    </div>
</footer>
    
</html>
